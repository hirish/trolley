// Generated by CoffeeScript 1.6.3
var Ingredient, Ingredients, Recipe, Recipes;

Ingredient = Backbone.Model.extend({
  defaults: {
    name: null,
    value: 0,
    amountRequired: 0,
    amountRequiredUnit: 'g'
  }
});

Ingredients = Backbone.Collection.extend({
  model: Ingredient
});

Recipe = Backbone.Model.extend({
  defaults: {
    ingredients: new Ingredients,
    url: null
  }
});

Recipes = Backbone.Collection.extend({
  model: Recipe
});

$(function() {
  var errorHandler, errorView, search, searchBox, searchResultHandler, throttledSearch;
  window.searchBox = searchBox = $('#search');
  search = function(e) {
    var searchText;
    searchText = searchBox.val();
    console.log(searchText);
    return $.ajax('search?q=' + searchText, {
      success: searchResultHandler,
      error: errorHandler
    });
  };
  throttledSearch = _.throttle(search, 250);
  searchResultHandler = function(results) {
    return console.log(results);
  };
  errorView = $('#error');
  errorHandler = function(reqObj) {
    var errorTemplate, renderedTemplate;
    errorTemplate = $('#errorTemplate').html();
    renderedTemplate = _.template(errorTemplate, {
      statusCode: 404
    });
    return errorView.html(renderedTemplate);
  };
  return searchBox.keyup(throttledSearch);
});
